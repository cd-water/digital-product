server:
  port: 9090

spring:
  application:
    name: digital-product-java
  servlet:
    multipart:
      max-request-size: 100MB
      max-file-size: 100MB
  #数据库配置
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    url: jdbc:mysql://你的主机名:3306/digital_product?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai
    username: # 请配置数据库用户名
    password: # 请配置数据库密码
    druid:
      # 连接池核心参数
      initialSize: 5      # 初始连接数
      minIdle: 5          # 最小空闲连接数
      maxActive: 20       # 最大连接数（根据并发量调整）
      maxWait: 5000       # 获取连接超时时间（毫秒）
      # 连接有效性检测
      validationQuery: SELECT 1
      testWhileIdle: true  # 空闲时检测连接
      testOnBorrow: false  # 获取连接时不检测（性能更好）
      testOnReturn: false  # 归还连接时不检测
      # 空闲连接管理
      timeBetweenEvictionRunsMillis: 60000  # 检测间隔（60秒）
      minEvictableIdleTimeMillis: 300000    # 连接最小空闲时间（5分钟）
  data:
    redis:
      host: server
      port: 6379
      password: # 请配置Redis密码
      database: 0
      timeout: 3000
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5
          max-wait: 3000

#mybatis配置
mybatis:
  configuration:
    map-underscore-to-camel-case: true
  mapper-locations: classpath:mapper/*.xml

#配置日志信息
logging:
  level:
    com.cdwater.digitalproduct: debug
    dev.langchain4j: debug

#jwt配置
jwt:
  secret: thisIsCdwaterSecretForDigitalProductProject # 请配置安全的JWT密钥
  admin-expiration: 14400000  # 4小时的毫秒数
  shop-expiration: 86400000  # 1天的毫秒数
  user-expiration: 604800000  # 7天的毫秒数
  token-name: Authorization

# 文件上传配置
dromara:
  x-file-storage: #文件存储配置
    default-platform: aliyun-oss-1 #默认使用的存储平台
    thumbnail-suffix: ".min.jpg" #缩略图后缀，例如【.min.jpg】【.png】
    #对应平台的配置写在这里，注意缩进要对齐
    aliyun-oss:
      - platform: aliyun-oss-1 # 存储平台标识
        enable-storage: true  # 启用存储
        access-key: # 请配置阿里云OSS访问密钥
        secret-key: # 请配置阿里云OSS密钥
        end-point: oss-cn-beijing.aliyuncs.com # 访问域名
        bucket-name: digital-product # 存储桶名称
        # 访问域名，注意"/"结尾，例如：https://abc.oss-cn-shanghai.aliyuncs.com/
        domain: https://digital-product.oss-cn-beijing.aliyuncs.com/
        base-path: images/ # 基础路径

langchain4j:
  open-ai:
    chat-model:
      base-url: https://api.deepseek.com/v1
      api-key: # 请配置DeepSeek API密钥
      model-name: deepseek-chat
      log-requests: true
      log-responses: true
    streaming-chat-model:
      base-url: https://api.deepseek.com/v1
      api-key: # 请配置DeepSeek API密钥
      model-name: deepseek-chat
      log-requests: true
      log-responses: true
    embedding-model:
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      api-key: # 请配置DashScope API密钥
      model-name: text-embedding-v4
      log-requests: true
      log-responses: true
      max-segments-per-batch: 10