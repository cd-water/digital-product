server:
  port: 9090

spring:
  application:
    name: digital-product-java
  servlet:
    multipart:
      max-request-size: 100MB
      max-file-size: 100MB
  #数据库配置
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    url: jdbc:mysql://localhost:3306/digital_product
    username: root
    password: 123456
    druid:
      # 连接池核心参数
      initialSize: 5      # 初始连接数
      minIdle: 5          # 最小空闲连接数
      maxActive: 20       # 最大连接数（根据并发量调整）
      maxWait: 5000       # 获取连接超时时间（毫秒）
      # 连接有效性检测
      validationQuery: SELECT 1
      testWhileIdle: true  # 空闲时检测连接
      testOnBorrow: false  # 获取连接时不检测（性能更好）
      testOnReturn: false  # 归还连接时不检测
      # 空闲连接管理
      timeBetweenEvictionRunsMillis: 60000  # 检测间隔（60秒）
      minEvictableIdleTimeMillis: 300000    # 连接最小空闲时间（5分钟）
  data:
    redis:
      host: server
      port: 6379
      password: 你的Redis密码
      database: 1
      timeout: 3000
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5
          max-wait: 3000

#mybatis配置
mybatis:
  configuration:
    map-underscore-to-camel-case: true
  mapper-locations: classpath:mapper/*.xml

#配置日志信息
logging:
  level:
    com.cdwater.digitalproduct: debug

#jwt配置
jwt:
  secret: thisIsCdwaterSecretForDigitalProductProject
  admin-expiration: 14400000  # 4小时的毫秒数
  shop-expiration: 86400000  # 1天的毫秒数
  user-expiration: 604800000  # 7天的毫秒数
  token-name: Authorization

# 文件上传配置
dromara:
  x-file-storage: #文件存储配置
    default-platform: aliyun-oss-1 #默认使用的存储平台
    thumbnail-suffix: ".min.jpg" #缩略图后缀，例如【.min.jpg】【.png】
    #对应平台的配置写在这里，注意缩进要对齐
    aliyun-oss:
      - platform: aliyun-oss-1 # 存储平台标识
        enable-storage: true  # 启用存储
        access-key: 你的阿里云 access-key # 访问密钥
        secret-key: 你的阿里云OSS secret-key # 密钥
        end-point: oss-cn-beijing.aliyuncs.com # 访问域名
        bucket-name: 你的阿里云OSS存储桶名称 # 存储桶名称
        # 访问域名，注意“/”结尾，例如：https://abc.oss-cn-shanghai.aliyuncs.com/
        domain: https://你的阿里云OSS存储桶名称.oss-cn-beijing.aliyuncs.com/
        base-path: images/ # 基础路径